---
import { astroI18n, t, l } from "astro-i18n";

import Layout from "../components/Layout.astro";
import ProgressSteps from "../components/ProgressSteps.astro";
import PetitionTextFr from "../components/PetitionTextFr.md";
import PetitionTextEn from "../components/PetitionTextEn.md";
import SignCta from "../components/SignCta.astro";
import InspirationAndReading from "../components/InspirationAndReading.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import SubscribeCta from "../components/SubscribeCta.astro";

astroI18n.init(Astro);

const { langCode } = astroI18n;
---

<Layout title={t("siteName")}>
  <main>
    <header>
      <Header />
    </header>

    <div id="progress-steps" class="narrow">
      <h2>{t("stepsTitle")}</h2>
      <ProgressSteps />
    </div>

    <div id="petition-text" class="narrow">
      <h2>{t("petitionTextHeading")}</h2>
      {langCode === "en" ? <PetitionTextEn /> : <PetitionTextFr />}
    </div>

    {
      /* <div id="sign-cta" class="cta">
      <SignCta />
    </div> */
    }

    <div id="subscribe-cta" class="narrow">
      <h2>{t("stayConnected")}</h2>
      <SubscribeCta />
    </div>

    {
      /*sponsors / supporters
    ama verdun, businesses, orgs, online groups */
    }

    <div id="inspiration-and-reading" class="narrow">
      <h2>{t("inspirationAndReading")}</h2>
      <InspirationAndReading />
    </div>

    <footer>
      <Footer />
    </footer>
  </main>
</Layout>

<style>
  :root {
    --header-padding: 4rem;
    --header-text-drop-shadow: drop-shadow(0px 5px 5px #00000050);
  }
  header {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    color: white;
    padding-bottom: var(--header-padding);
    margin-bottom: 2rem;

    background-image: url("/img/header-static.jpg");
    background-size: cover;
    background-position: center;
  }
  #progress-steps {
    margin-bottom: 3rem;
  }

  #petition-text {
    line-height: 1.6;
  }

  #inspiration-and-reading {
    display: flex;
    flex-direction: column;
  }
  .narrow {
    max-width: auto;
    margin: 1rem;
    @media (min-width: 980px) {
      max-width: 60vw;
      margin: 1rem auto;
      flex-direction: row;
      justify-content: space-between;
    }
  }

  footer {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding-top: 2rem;
    margin-top: 3rem;
    text-align: center;
  }
</style>
